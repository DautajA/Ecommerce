{"ast":null,"code":"import React,{useState,useEffect}from'react';import Layout from'../../components/Layout/Layout';import UserMenu from'../../components/Layout/UserMenu';import{useAuth}from'../../context/auth';import axios from'axios';import moment from'moment';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Orders=()=>{const[orders,setOrders]=useState([]);const[auth,setAuth]=useAuth();const getOrders=async()=>{try{const{data}=await axios.get('http://localhost:8080/api/v1/auth/orders');setOrders(data);}catch(error){console.log(error);}};useEffect(()=>{if(auth!==null&&auth!==void 0&&auth.token)getOrders();},[auth===null||auth===void 0?void 0:auth.token]);return/*#__PURE__*/_jsx(Layout,{title:'Dashboard - All Orders',children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid mt-3 pt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(UserMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"admin-part text-center\",children:\"All Orders\"}),orders===null||orders===void 0?void 0:orders.map((o,i)=>{var _o$buyer,_o$products,_o$products2;return/*#__PURE__*/_jsxs(\"div\",{className:\"border shadow\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Buyer\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:o.status}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$buyer=o.buyer)===null||_o$buyer===void 0?void 0:_o$buyer.name}),/*#__PURE__*/_jsx(\"td\",{children:moment(o===null||o===void 0?void 0:o.createAt).fromNow()}),/*#__PURE__*/_jsx(\"td\",{children:o!==null&&o!==void 0&&o.payment.success?'Success':'Failed'}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$products=o.products)===null||_o$products===void 0?void 0:_o$products.length})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:o===null||o===void 0?void 0:(_o$products2=o.products)===null||_o$products2===void 0?void 0:_o$products2.map((p,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-2 p-3 card flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8080/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top\",width:\"100px\",height:\"200px\",style:{objectFit:\"cover\"},alt:p.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:p.name}),/*#__PURE__*/_jsx(\"p\",{children:p.description.substring(0,30)}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price :$ \",p.price]})]})]},p._id||i))})]},o._id||i);})]})]})})});};export default Orders;","map":{"version":3,"names":["React","useState","useEffect","Layout","UserMenu","useAuth","axios","moment","jsx","_jsx","jsxs","_jsxs","Orders","orders","setOrders","auth","setAuth","getOrders","data","get","error","console","log","token","title","children","className","map","o","i","_o$buyer","_o$products","_o$products2","scope","status","buyer","name","createAt","fromNow","payment","success","products","length","p","src","concat","_id","width","height","style","objectFit","alt","description","substring","price"],"sources":["C:/Users/User/Documents/armonela/WonderHouse/frontend/src/pages/user/Orders.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport Layout from '../../components/Layout/Layout'\r\nimport UserMenu from '../../components/Layout/UserMenu'\r\nimport { useAuth } from '../../context/auth';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [auth, setAuth] = useAuth()\r\n\r\n  const getOrders = async() => {\r\n     try {\r\n      const {data} = await axios.get('http://localhost:8080/api/v1/auth/orders');\r\n      setOrders(data);\r\n     } catch (error) {\r\n      console.log(error)\r\n     }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if(auth?.token) getOrders()\r\n  },[auth?.token]);\r\n\r\n  return (\r\n    <Layout  title={'Dashboard - All Orders'}>\r\n    <div className='container-fluid mt-3 pt-3'>\r\n     <div className='row'>\r\n           <div className='col-md-3'><UserMenu/></div>\r\n           <div className='col-md-9'>\r\n             <h1 className='admin-part text-center'>All Orders</h1>\r\n             {\r\n              orders?.map((o, i) => {\r\n                return(\r\n                  <div className='border shadow' key={o._id || i}>\r\n                    <table className='table'>\r\n                      <thead>\r\n                        <tr>\r\n                          <th scope='col'>#</th>\r\n                          <th scope='col'>Status</th>\r\n                          <th scope='col'>Buyer</th>\r\n                          <th scope='col'>Date</th>\r\n                          <th scope='col'>Payment</th>\r\n                          <th scope='col'>Quantity</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        <tr>\r\n                          <td>{i+1}</td>\r\n                          <td>{o?.status}</td>\r\n                          <td>{o?.buyer?.name}</td>\r\n                          <td>{moment(o?.createAt).fromNow()}</td>\r\n                          <td>{o?.payment.success ? 'Success' : 'Failed'}</td>\r\n                          <td>{o?.products?.length}</td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                    <div className='container-fluid'>\r\n                      {o?.products?.map((p, i) => (\r\n                        <div className=\"row mb-2 p-3 card flex-row\" key={p._id|| i}>\r\n                          <div className=\"col-md-4\">\r\n                            <img\r\n                              src={`http://localhost:8080/api/v1/product/product-photo/${p._id}`}\r\n                              className=\"card-img-top\"\r\n                              width=\"100px\"\r\n                              height=\"200px\"\r\n                              style={{ objectFit: \"cover\" }}\r\n                              alt={p.name}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-md-4\">\r\n                            <p>{p.name}</p>\r\n                            <p>{p.description.substring(0, 30)}</p>\r\n                            <p>Price :$ {p.price}</p>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })\r\n            }\r\n           </div>\r\n        </div>\r\n      </div>\r\n  </Layout>\r\n  )\r\n}\r\n\r\nexport default Orders\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}