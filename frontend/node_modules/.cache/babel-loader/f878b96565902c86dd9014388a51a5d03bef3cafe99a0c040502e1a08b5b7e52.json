{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Layout from\"../../components/Layout/Layout\";import AdminMenu from\"../../components/Layout/AdminMenu\";import toast from\"react-hot-toast\";import axios from\"axios\";import CategoryForm from\"../../components/Form/CategoryForm\";import{Modal}from\"antd\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateCategory=()=>{const[name,setName]=useState(\"\");const[categories,setCategories]=useState([]);const[visible,setVisible]=useState(false);const[selected,setSelected]=useState(null);const[updateName,setUpdateName]=useState(\"\");// Create Category\nconst handleSubmit=async e=>{e.preventDefault();try{const{data}=await axios.post(\"http://localhost:8080/api/v1/category/create-category\",{name});if(data!==null&&data!==void 0&&data.success){toast.success(\"\".concat(name,\" is Created\"));setName(\"\");// Clear the input field\ngetAllCategory();}else{toast.error(data.message);}}catch(error){console.log(error);toast.error(\"Something went wrong in input form\");}};// Get All Categories\nconst getAllCategory=async()=>{try{const{data}=await axios.get(\"http://localhost:8080/api/v1/category/get-category\");if(data.success){setCategories(data.category);}}catch(error){console.log(error);toast.error(\"Something went wrong in getting category\");}};useEffect(()=>{getAllCategory();},[]);// Update Category\nconst handleUpdate=async e=>{e.preventDefault();try{const{data}=await axios.put(\"http://localhost:8080/api/v1/category/update-category/\".concat(selected),{name:updateName});if(data!==null&&data!==void 0&&data.success){toast.success(\"Category updated successfully\");setVisible(false);setSelected(null);setUpdateName(\"\");getAllCategory();}else{toast.error(data.message);}}catch(error){console.log(error);toast.error(\"Something went wrong while updating category\");}};// Delete Category\nconst handleDelete=async id=>{try{const{data}=await axios.delete(\"http://localhost:8080/api/v1/category/delete-category/\".concat(id));if(data!==null&&data!==void 0&&data.success){toast.success(\"Category deleted successfully\");getAllCategory();}else{toast.error(data.message);}}catch(error){console.log(error);toast.error(\"Something went wrong while deleting category\");}};return/*#__PURE__*/_jsx(Layout,{title:\"Dashboard - Create Category\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid mt-3 pt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(AdminMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"admin-part text-center\",children:\"Manage Category\"}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 w-50\",children:/*#__PURE__*/_jsx(CategoryForm,{handleSubmit:handleSubmit,value:name,setValue:setName})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-75\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:categories.map(c=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:c.name}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary ms-2\",onClick:()=>{setVisible(true);setUpdateName(c.name);setSelected(c._id);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger ms-2\",onClick:()=>handleDelete(c._id),children:\"Delete\"})]})]},c._id))})]})}),/*#__PURE__*/_jsx(Modal,{onCancel:()=>setVisible(false),footer:null,visible:visible,children:/*#__PURE__*/_jsx(CategoryForm,{value:updateName,setValue:setUpdateName,handleSubmit:handleUpdate})})]})]})})});};export default CreateCategory;","map":{"version":3,"names":["React","useEffect","useState","Layout","AdminMenu","toast","axios","CategoryForm","Modal","jsx","_jsx","jsxs","_jsxs","CreateCategory","name","setName","categories","setCategories","visible","setVisible","selected","setSelected","updateName","setUpdateName","handleSubmit","e","preventDefault","data","post","success","concat","getAllCategory","error","message","console","log","get","category","handleUpdate","put","handleDelete","id","delete","title","children","className","value","setValue","scope","map","c","onClick","_id","onCancel","footer"],"sources":["C:/Users/User/Documents/armonela/WonderHouse/frontend/src/pages/Admin/CreateCategory.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Layout from \"../../components/Layout/Layout\";\r\nimport AdminMenu from \"../../components/Layout/AdminMenu\";\r\nimport toast from \"react-hot-toast\";\r\nimport axios from \"axios\";\r\nimport CategoryForm from \"../../components/Form/CategoryForm\";\r\nimport { Modal } from \"antd\";\r\n\r\nconst CreateCategory = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [categories, setCategories] = useState([]);\r\n  const [visible, setVisible] = useState(false);\r\n  const [selected, setSelected] = useState(null);\r\n  const [updateName, setUpdateName] = useState(\"\");\r\n\r\n  // Create Category\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"http://localhost:8080/api/v1/category/create-category\",\r\n        { name }\r\n      );\r\n      if (data?.success) {\r\n        toast.success(`${name} is Created`);\r\n        setName(\"\"); // Clear the input field\r\n        getAllCategory();\r\n      } else {\r\n        toast.error(data.message);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"Something went wrong in input form\");\r\n    }\r\n  };\r\n\r\n  // Get All Categories\r\n  const getAllCategory = async () => {\r\n    try {\r\n      const { data } = await axios.get(\r\n        \"http://localhost:8080/api/v1/category/get-category\"\r\n      );\r\n      if (data.success) {\r\n        setCategories(data.category);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"Something went wrong in getting category\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getAllCategory();\r\n  }, []);\r\n\r\n  // Update Category\r\n  const handleUpdate = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const { data } = await axios.put(\r\n        `http://localhost:8080/api/v1/category/update-category/${selected}`,\r\n        { name: updateName }\r\n      );\r\n      if (data?.success) {\r\n        toast.success(\"Category updated successfully\");\r\n        setVisible(false);\r\n        setSelected(null);\r\n        setUpdateName(\"\");\r\n        getAllCategory();\r\n      } else {\r\n        toast.error(data.message);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"Something went wrong while updating category\");\r\n    }\r\n  };\r\n\r\n  // Delete Category\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      const { data } = await axios.delete(\r\n        `http://localhost:8080/api/v1/category/delete-category/${id}`\r\n      );\r\n      if (data?.success) {\r\n        toast.success(\"Category deleted successfully\");\r\n        getAllCategory();\r\n      } else {\r\n        toast.error(data.message);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"Something went wrong while deleting category\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout title={\"Dashboard - Create Category\"}>\r\n      <div className=\"container-fluid mt-3 pt-3\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-3\">\r\n            <AdminMenu />\r\n          </div>\r\n          <div className=\"col-md-9\">\r\n            <h1 className=\"admin-part text-center\">Manage Category</h1>\r\n            <div className=\"p-3 w-50\">\r\n              <CategoryForm\r\n                handleSubmit={handleSubmit}\r\n                value={name}\r\n                setValue={setName}\r\n              />\r\n            </div>\r\n            <div className=\"w-75\">\r\n              <table className=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\">Name</th>\r\n                    <th scope=\"col\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {categories.map((c) => (\r\n                    <tr key={c._id}>\r\n                      <td>{c.name}</td>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn btn-primary ms-2\"\r\n                          onClick={() => {\r\n                            setVisible(true);\r\n                            setUpdateName(c.name);\r\n                            setSelected(c._id);\r\n                          }}\r\n                        >\r\n                          Edit\r\n                        </button>\r\n                        <button\r\n                          className=\"btn btn-danger ms-2\"\r\n                          onClick={() => handleDelete(c._id)}\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <Modal\r\n              onCancel={() => setVisible(false)}\r\n              footer={null}\r\n              visible={visible}\r\n            >\r\n              <CategoryForm\r\n                value={updateName}\r\n                setValue={setUpdateName}\r\n                handleSubmit={handleUpdate}\r\n              />\r\n            </Modal>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CreateCategory;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}