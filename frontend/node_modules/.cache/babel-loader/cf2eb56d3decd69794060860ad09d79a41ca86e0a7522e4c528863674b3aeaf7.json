{"ast":null,"code":"import React,{useState,useEffect}from'react';import AdminMenu from'../../components/Layout/AdminMenu';import Layout from'../../components/Layout/Layout';import axios from'axios';import toast from'react-hot-toast';import moment from'moment';import{useAuth}from'../../context/auth';import{Select}from'antd';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminOrders=()=>{const[status]=useState(['Not Process','Processing','Shipping','Delivered','Cancel']);const[changeStatus,setChangeStatus]=useState('');const[orders,setOrders]=useState([]);const[auth]=useAuth();const getOrders=async()=>{try{const{data}=await axios.get('http://localhost:8080/api/v1/auth/all-orders');setOrders(data);}catch(error){console.log(error);}};useEffect(()=>{if(auth!==null&&auth!==void 0&&auth.token)getOrders();},[auth===null||auth===void 0?void 0:auth.token]);const handleChange=async(orderId,value)=>{try{const{data}=await axios.put(\"http://localhost:8080/api/v1/auth/order-status/\".concat(orderId),{status:value});toast.success(\"Order status updated successfully\");getOrders();}catch(error){console.log(error);toast.error(\"Failed to update order status\");}};return/*#__PURE__*/_jsx(Layout,{title:\"All Orders Data\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid mt-3 pt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(AdminMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"admin-part text-center\",children:\"All Orders\"}),orders===null||orders===void 0?void 0:orders.map((o,i)=>{var _o$buyer,_o$products,_o$products2;return/*#__PURE__*/_jsxs(\"div\",{className:\"border shadow\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Buyer\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Select,{bordered:false,onChange:value=>handleChange(o._id,value),defaultValue:o===null||o===void 0?void 0:o.status,children:status.map((s,index)=>/*#__PURE__*/_jsx(Select.Option,{value:s,children:s},index))})}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$buyer=o.buyer)===null||_o$buyer===void 0?void 0:_o$buyer.name}),/*#__PURE__*/_jsx(\"td\",{children:moment(o===null||o===void 0?void 0:o.createAt).fromNow()}),/*#__PURE__*/_jsx(\"td\",{children:o!==null&&o!==void 0&&o.payment.success?'Success':'Failed'}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$products=o.products)===null||_o$products===void 0?void 0:_o$products.length})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:o===null||o===void 0?void 0:(_o$products2=o.products)===null||_o$products2===void 0?void 0:_o$products2.map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-2 p-3 card flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8080/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top\",width:\"100px\",height:\"200px\",style:{objectFit:\"cover\"},alt:p.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:p.name}),/*#__PURE__*/_jsx(\"p\",{children:p.description.substring(0,30)}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $ \",p.price]})]})]},p._id))})]},o._id);})]})]})})});};export default AdminOrders;","map":{"version":3,"names":["React","useState","useEffect","AdminMenu","Layout","axios","toast","moment","useAuth","Select","jsx","_jsx","jsxs","_jsxs","AdminOrders","status","changeStatus","setChangeStatus","orders","setOrders","auth","getOrders","data","get","error","console","log","token","handleChange","orderId","value","put","concat","success","title","children","className","map","o","i","_o$buyer","_o$products","_o$products2","scope","bordered","onChange","_id","defaultValue","s","index","Option","buyer","name","createAt","fromNow","payment","products","length","p","src","width","height","style","objectFit","alt","description","substring","price"],"sources":["C:/Users/User/Documents/armonela/WonderHouse/frontend/src/pages/Admin/AdminOrders.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport AdminMenu from '../../components/Layout/AdminMenu';\r\nimport Layout from '../../components/Layout/Layout';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\nimport moment from 'moment';\r\nimport { useAuth } from '../../context/auth';\r\nimport { Select } from 'antd';\r\n\r\nconst AdminOrders = () => {\r\n    const [status] = useState(['Not Process', 'Processing', 'Shipping', 'Delivered', 'Cancel']);\r\n    const [changeStatus, setChangeStatus] = useState('');\r\n    const [orders, setOrders] = useState([]);\r\n    const [auth] = useAuth();\r\n\r\n    const getOrders = async () => {\r\n        try {\r\n            const { data } = await axios.get('http://localhost:8080/api/v1/auth/all-orders');\r\n            setOrders(data);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (auth?.token) getOrders();\r\n    }, [auth?.token]);\r\n    \r\n    const handleChange = async(orderId, value) => {\r\n      try {\r\n        const {data} = await axios.put(`http://localhost:8080/api/v1/auth/order-status/${orderId}`, {status:value});\r\n        toast.success(\"Order status updated successfully\");\r\n        getOrders();\r\n      } catch (error) {\r\n        console.log(error)\r\n        toast.error(\"Failed to update order status\");\r\n      }\r\n    };\r\n    return (\r\n        <Layout title=\"All Orders Data\">\r\n            <div className=\"container-fluid mt-3 pt-3\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-3\">\r\n                        <AdminMenu />\r\n                    </div>\r\n                    <div className=\"col-md-9\">\r\n                        <h1 className=\"admin-part text-center\">All Orders</h1>\r\n                        {orders?.map((o, i) => {\r\n                            return (\r\n                                <div className=\"border shadow\" key={o._id}>\r\n                                    <table className=\"table\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th scope=\"col\">#</th>\r\n                                                <th scope=\"col\">Status</th>\r\n                                                <th scope=\"col\">Buyer</th>\r\n                                                <th scope=\"col\">Date</th>\r\n                                                <th scope=\"col\">Payment</th>\r\n                                                <th scope=\"col\">Quantity</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <td>{i + 1}</td>\r\n                                                <td>\r\n                                                    <Select\r\n                                                        bordered={false}\r\n                                                        onChange={(value) => handleChange(o._id, value)}\r\n                                                        defaultValue={o?.status}\r\n                                                    >\r\n                                                        {status.map((s, index) => (\r\n                                                            <Select.Option key={index} value={s}>\r\n                                                                {s}\r\n                                                            </Select.Option>\r\n                                                        ))}\r\n                                                    </Select>\r\n                                                </td>\r\n                                                <td>{o?.buyer?.name}</td>\r\n                                                <td>{moment(o?.createAt).fromNow()}</td>\r\n                                                <td>{o?.payment.success ? 'Success' : 'Failed'}</td>\r\n                                                <td>{o?.products?.length}</td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                    <div className=\"container-fluid\">\r\n                                        {o?.products?.map((p) => (\r\n                                            <div className=\"row mb-2 p-3 card flex-row\" key={p._id}>\r\n                                                <div className=\"col-md-4\">\r\n                                                    <img\r\n                                                        src={`http://localhost:8080/api/v1/product/product-photo/${p._id}`}\r\n                                                        className=\"card-img-top\"\r\n                                                        width=\"100px\"\r\n                                                        height=\"200px\"\r\n                                                        style={{ objectFit: \"cover\" }}\r\n                                                        alt={p.name}\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"col-md-4\">\r\n                                                    <p>{p.name}</p>\r\n                                                    <p>{p.description.substring(0, 30)}</p>\r\n                                                    <p>Price: $ {p.price}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default AdminOrders;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}