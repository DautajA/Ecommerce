{"ast":null,"code":"import React,{useState,useEffect}from'react';import Layout from'../components/Layout/Layout';import axios from'axios';import{useParams}from'react-router-dom';import{useCart}from'../context/cart';import toast from'react-hot-toast';import'../style/CartStyles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetails=()=>{var _product$category;const params=useParams();const[product,setProduct]=useState({});const[relatedProducts,setRelatedProducts]=useState([]);const[cart,setCart]=useCart();useEffect(()=>{if(params!==null&&params!==void 0&&params.slug)getProduct();},[params===null||params===void 0?void 0:params.slug]);//get product\nconst getProduct=async()=>{try{const{data}=await axios.get(\"http://localhost:8080/api/v1/product/get-product/\".concat(params.slug));setProduct(data===null||data===void 0?void 0:data.product);getSimilarProduct(data===null||data===void 0?void 0:data.product._id,data===null||data===void 0?void 0:data.product.category._id);}catch(error){console.log(error);}};//get similar product\nconst getSimilarProduct=async(pid,cid)=>{try{const{data}=await axios.get(\"http://localhost:8080/api/v1/product/related-product/\".concat(pid,\"/\").concat(cid));setRelatedProducts(data===null||data===void 0?void 0:data.products);}catch(error){console.log(error);}};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row conatiner-fluid mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8080/api/v1/product/product-photo/\".concat(product._id),className:\"card-img-top \",alt:product===null||product===void 0?void 0:product.name,height:\"400px\",width:\"350px\",style:{objectFit:\"cover\"}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 product-details-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center product-details\",children:\"Product Details\"}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Name : \",/*#__PURE__*/_jsx(\"span\",{children:product===null||product===void 0?void 0:product.name})]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Description : \",/*#__PURE__*/_jsx(\"span\",{children:product===null||product===void 0?void 0:product.description})]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Price : \",/*#__PURE__*/_jsx(\"span\",{children:product===null||product===void 0?void 0:product.price})]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Category : \",/*#__PURE__*/_jsx(\"span\",{children:product===null||product===void 0?void 0:(_product$category=product.category)===null||_product$category===void 0?void 0:_product$category.name})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary ms-1\",onClick:()=>{setCart([...cart,product]);localStorage.setItem('cart',JSON.stringify([...cart,product]));toast.success('Item added to cart');},children:\"Add to CART\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row container-fluid cart-page\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\" text-center\",children:\"Similar products\"}),relatedProducts.length<1&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"No similar Products found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap\",children:relatedProducts===null||relatedProducts===void 0?void 0:relatedProducts.map(p=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card m-1\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8080/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top product-img\",alt:p.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:p.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"price-badge\",children:[\"$\",p.price]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[p.description.substring(0,30),\"...\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-remove-btn\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary ms-1\",onClick:()=>{setCart([...cart,p]);localStorage.setItem('cart',JSON.stringify([...cart,p]));toast.success('Item added to cart');},children:\"Add to CART\"})})]})]})},p._id);})})]})})]})});};export default ProductDetails;","map":{"version":3,"names":["React","useState","useEffect","Layout","axios","useParams","useCart","toast","jsx","_jsx","jsxs","_jsxs","ProductDetails","_product$category","params","product","setProduct","relatedProducts","setRelatedProducts","cart","setCart","slug","getProduct","data","get","concat","getSimilarProduct","_id","category","error","console","log","pid","cid","products","children","className","src","alt","name","height","width","style","objectFit","description","price","onClick","localStorage","setItem","JSON","stringify","success","length","map","p","substring"],"sources":["C:/Users/User/Documents/armonela/WonderHouse/frontend/src/pages/ProductDetails.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Layout from '../components/Layout/Layout'\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useCart } from '../context/cart';\r\nimport toast from 'react-hot-toast';\r\nimport '../style/CartStyles.css';\r\n\r\nconst ProductDetails = () => {\r\n  const params = useParams();\r\n  const [product, setProduct] = useState({});\r\n  const [relatedProducts, setRelatedProducts] = useState([]);\r\n  const [cart, setCart] = useCart();\r\n\r\n\r\n  useEffect(() => {\r\n    if (params?.slug) getProduct();\r\n  }, [params?.slug]);\r\n\r\n  //get product\r\n  const getProduct = async () => {\r\n    try {\r\n      const { data } = await axios.get(`http://localhost:8080/api/v1/product/get-product/${params.slug}`);\r\n      setProduct(data?.product);\r\n      getSimilarProduct(data?.product._id, data?.product.category._id);\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  };\r\n\r\n  //get similar product\r\n  const getSimilarProduct = async (pid, cid) => {\r\n    try {\r\n      const { data } = await axios.get(`http://localhost:8080/api/v1/product/related-product/${pid}/${cid}`);\r\n      setRelatedProducts(data?.products)\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <div className='container-fluid'>\r\n        <div className='row conatiner-fluid mt-3'>\r\n          <div className='col-md-6'>\r\n            <img\r\n              src={`http://localhost:8080/api/v1/product/product-photo/${product._id}`}\r\n              className=\"card-img-top \"\r\n              alt={product?.name}\r\n              height={\"400px\"}\r\n              width={\"350px\"}\r\n              style={{ objectFit: \"cover\" }}\r\n            />\r\n          </div>\r\n          <div className='col-md-6 product-details-container'>\r\n            <h1 className='text-center product-details'>Product Details</h1>\r\n            <h5>Name : <span>{product?.name}</span></h5>\r\n            <h5>Description : <span>{product?.description}</span></h5>\r\n            <h5>Price : <span>{product?.price}</span></h5>\r\n            <h5>Category : <span>{product?.category?.name}</span></h5>\r\n            <button className='btn btn-secondary ms-1'\r\n              onClick={() => {\r\n                setCart([...cart, product]);\r\n                localStorage.setItem('cart', JSON.stringify([...cart, product]))\r\n                toast.success('Item added to cart')\r\n              }}>Add to CART</button>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n        <div className='row container-fluid cart-page'>\r\n          <div>\r\n            <h1 className=' text-center'>Similar products</h1>\r\n            {relatedProducts.length < 1 && (<p className='text-center'>No similar Products found</p>)}\r\n            <div className='d-flex flex-wrap'>\r\n              {relatedProducts?.map((p) => {\r\n                return (\r\n                  <div key={p._id} className='col-6 col-md-4'>\r\n                    <div className=\"card m-1\">\r\n                      <img src={`http://localhost:8080/api/v1/product/product-photo/${p._id}`} className=\"card-img-top product-img\" alt={p.name} />\r\n                      <div className=\"card-body\">\r\n                        <div className=\"card-header\">\r\n                          <h5 className=\"card-title\">{p.name}</h5>\r\n                          <span className=\"price-badge\">${p.price}</span>\r\n                        </div>\r\n                        <p className=\"card-text\">{p.description.substring(0, 30)}...</p>\r\n                        <div className='cart-remove-btn'>\r\n                        {/* <button className='btn btn-primary ms-1' onClick={()=> navigate(`/product/${p.slug}`)}>More Details</button> */}\r\n                        <button className='btn btn-secondary ms-1'\r\n                          onClick={() => {\r\n                            setCart([...cart, p]);\r\n                            localStorage.setItem('cart', JSON.stringify([...cart, p]))\r\n                            toast.success('Item added to cart')\r\n                          }}>Add to CART</button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport default ProductDetails\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}