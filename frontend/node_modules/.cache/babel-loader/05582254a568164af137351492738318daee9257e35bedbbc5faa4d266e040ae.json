{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../../context/auth';import{Outlet}from'react-router-dom';import axios from'axios';import Spinner from'../Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";export default function AdminRoute(){const[ok,setOk]=useState(false);const[auth,setAuth]=useAuth();useEffect(()=>{const authCheck=async()=>{const res=await axios.get('http://localhost:8080/api/v1/auth/admin-auth');if(res.data.ok){setOk(true);}else{setOk(false);}};if(auth!==null&&auth!==void 0&&auth.token){authCheck();}else{setOk(false);// Nëse nuk ka token, vendosim ok = false\n}},[auth===null||auth===void 0?void 0:auth.token]);return ok?/*#__PURE__*/_jsx(Outlet,{}):/*#__PURE__*/_jsx(Spinner,{path:\"\"});}","map":{"version":3,"names":["React","useState","useEffect","useAuth","Outlet","axios","Spinner","jsx","_jsx","AdminRoute","ok","setOk","auth","setAuth","authCheck","res","get","data","token","path"],"sources":["C:/Users/User/Documents/armonela/WonderHouse/frontend/src/components/Routes/AdminRoute.js"],"sourcesContent":["import React,{useState, useEffect}from 'react';\r\nimport { useAuth } from '../../context/auth';\r\nimport { Outlet } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Spinner from '../Spinner';\r\n\r\nexport default function AdminRoute() {\r\n    const [ok, setOk] = useState(false);\r\n    const [auth, setAuth] = useAuth();\r\n  \r\n    useEffect(() => {\r\n      const authCheck = async () => {\r\n          const res = await axios.get('http://localhost:8080/api/v1/auth/admin-auth');\r\n          if (res.data.ok) {\r\n            setOk(true);\r\n          } else {\r\n            setOk(false);\r\n          }\r\n        };\r\n      if (auth?.token) {\r\n        authCheck();\r\n      } else {\r\n        setOk(false); // Nëse nuk ka token, vendosim ok = false\r\n      }\r\n    }, [auth?.token]);\r\n  \r\n    return ok ? <Outlet/> : <Spinner path=\"\" />;\r\n  }\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAEC,QAAQ,CAAEC,SAAS,KAAM,OAAO,CAC9C,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,OAASC,MAAM,KAAQ,kBAAkB,CACzC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEjC,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACjC,KAAM,CAACC,EAAE,CAAEC,KAAK,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CACnC,KAAM,CAACW,IAAI,CAAEC,OAAO,CAAC,CAAGV,OAAO,CAAC,CAAC,CAEjCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAV,KAAK,CAACW,GAAG,CAAC,8CAA8C,CAAC,CAC3E,GAAID,GAAG,CAACE,IAAI,CAACP,EAAE,CAAE,CACfC,KAAK,CAAC,IAAI,CAAC,CACb,CAAC,IAAM,CACLA,KAAK,CAAC,KAAK,CAAC,CACd,CACF,CAAC,CACH,GAAIC,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEM,KAAK,CAAE,CACfJ,SAAS,CAAC,CAAC,CACb,CAAC,IAAM,CACLH,KAAK,CAAC,KAAK,CAAC,CAAE;AAChB,CACF,CAAC,CAAE,CAACC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,KAAK,CAAC,CAAC,CAEjB,MAAO,CAAAR,EAAE,cAAGF,IAAA,CAACJ,MAAM,GAAC,CAAC,cAAGI,IAAA,CAACF,OAAO,EAACa,IAAI,CAAC,EAAE,CAAE,CAAC,CAC7C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}